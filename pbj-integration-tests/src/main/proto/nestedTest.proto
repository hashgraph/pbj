// SPDX-License-Identifier: Apache-2.0
syntax = "proto3";
package pbj.integ.tests;
option java_multiple_files = true;

// This test verifies if the EndOfStream messages in both NestedTestRequest and NestedTestResponse
// can be resolved correctly in Java tests for these messages generated by PBJ.

message NestedTestRequest {
  EndOfStream end_stream = 1;
  message EndOfStream {
    RequestCode status = 1;
    enum RequestCode {
      DO_NOT_USE = 0;
      RESET = 1;
      ERROR = 2;
    }
  }
}

message NestedTestResponse {
  EndOfStream end_stream = 1;
  message EndOfStream {
    ResponseCode status = 1;
    enum ResponseCode {
      UNKNOWN = 0;
      SUCCESS = 1;
      TIMEOUT = 2;
    }
  }
}

service TestService {
  rpc NestedTest (stream NestedTestRequest) returns (stream NestedTestResponse);
}
